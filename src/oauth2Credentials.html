<script type="text/html" data-template-name="oauth2Credentials">
    <!-- node-input-name -->
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="oauth2.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]oauth2.placeholder.name" style="width:70%;" />
    </div>
    <!-- node-input-grant_type -->
    <div class="form-row">
        <label for="node-input-grant_type"><i class="fa fa-wrench"></i> <span data-i18n="oauth2.label.grant_type"></span></label>
        <select type="text" id="node-input-grant_type" style="width:70%;">
        <option value="client_credentials" data-i18n="oauth2.opts.client_credentials"></option>
        <option value="password" data-i18n="oauth2.opts.password_credentials"></option>
        <option value="authorization_code" data-i18n="oauth2.opts.authorization_code"></option>
        </select>
    </div>
    <!-- node-access_token_url -->
    <div class="form-row" id="node-access_token_url">
        <label for="node-input-access_token_url"><i class="fa fa-link fa-fw"></i> <span data-i18n="oauth2.label.access_token_url"></span></label>
        <input type="text" id="node-input-access_token_url" data-i18n="[placeholder]oauth2.placeholder.access_token_url" style="width:70%;" />
    </div>
    <!-- node-authorization_endpoint -->
    <div class="form-row" id="node-authorization_endpoint">
        <label for="node-input-authorization_endpoint"><i class="fa fa-link fa-fw"></i> <span data-i18n="oauth2.label.authorization_endpoint"></span></label>
        <input type="text" id="node-input-authorization_endpoint" data-i18n="[placeholder]oauth2.placeholder.authorization_endpoint" style="width:70%;" />
    </div>
    <!-- node-password_credentials -->
    <div class="form-row" id="node-password_credentials">
        <!--node-input-username -->
        <div class="form-row">
        <label for="node-input-username"><i class="fa fa-user fa-fw"></i> <span data-i18n="oauth2.label.username"></span></label>
        <input type="text" id="node-input-username" data-i18n="[placeholder]oauth2.placeholder.username" style="width:70%;" />
        </div>
        <!-- node-input-password -->
        <div class="form-row">
        <label for="node-input-password"><i class="fa  fa-lock fa-fw"></i> <span data-i18n="oauth2.label.password"></span></label>
        <input type="password" id="node-input-password" data-i18n="[placeholder]oauth2.placeholder.password" style="width:70%;" />
        </div>
    </div>
    <!-- node-client_id -->
    <div class="form-row" id="node-client_id">
        <label for="node-input-client_id"><i class="fa fa-user fa-fw"></i> <span data-i18n="oauth2.label.client_id"></span></label>
        <input type="text" id="node-input-client_id" data-i18n="[placeholder]oauth2.placeholder.client_id" style="width:70%;" />
    </div>
    <!-- node-client_secret -->
    <div class="form-row" id="node-client_secret">
        <label for="node-input-client_secret"><i class="fa fa-lock fa-fw"></i> <span data-i18n="oauth2.label.client_secret"></span></label>
        <input type="password" id="node-input-client_secret" data-i18n="[placeholder]oauth2.placeholder.client_secret" style="width:70%;" />
    </div>
    <!-- node-scope -->
    <div class="form-row" id="node-scope">
        <label for="node-input-scope"><i class="fa fa-code fa-fw"></i> <span data-i18n="oauth2.label.scope"></span></label>
        <input type="text" id="node-input-scope" data-i18n="[placeholder]oauth2.placeholder.scope" style="width:70%;" />
    </div>
        <!-- node-resource -->
        <div class="form-row" id="node-resource">
        <label for="node-input-resource"><i class="fa fa-code fa-fw"></i> <span data-i18n="oauth2.label.resource"></span></label>
        <input type="text" id="node-input-resource" data-i18n="[placeholder]oauth2.placeholder.resource" style="width:70%;" />
    </div>

</script>

<script type="text/javascript">
    RED.nodes.registerType('oauth2Credentials',{
        category: 'config',
        defaults: {
            name: {
                value: ''
            },
            access_token_url: { value: '' },
            authorization_endpoint: { value: '' },
            redirect_uri: { value: '/oauth2/redirect_uri' },
            open_authentication: { value: '' },
            username: { value: '' },
            client_id: { value: '' },
            scope: { value: '' },
            resource: { value: ''}
        },
        credentials: {
            password: { value: '', type: 'password'  },
            client_secret: { value: '', type: 'password' }
        },
        label: function() {
            return this.name;
        },
        oneditprepare: function () {
            $('#node-input-grant_type').on('change', function () {
            if ($('#node-input-grant_type').val() === 'client_credentials') {
                $('#node-authorization_endpoint').hide();
                $('#node-open_authentication').hide();
                $('#node-redirect_uri').hide();
                $('#node-password_credentials').hide();
                $('#node-access_token_url').show();
                $('#node-client_id').show();
                $('#node-client_secret').show();
                $('#node-scope').show();
                $('#node-resource').show();
            } else if ($('#node-input-grant_type').val() === 'password') {
                $('#node-authorization_endpoint').hide();
                $('#node-open_authentication').hide();
                $('#node-redirect_uri').hide();
                $('#node-password_credentials').show();
                $('#node-access_token_url').show();
                $('#node-client_id').show();
                $('#node-client_secret').show();
                $('#node-scope').show();
                $('#node-resource').show();
            } else if ($('#node-input-grant_type').val() === 'authorization_code') {
                $('#node-password_credentials').hide();
                $('#node-open_authentication').show();
                $('#node-redirect_uri').show();
                $('#node-access_token_url').show();
                $('#node-authorization_endpoint').show();
                $('#node-client_id').show();
                $('#node-client_secret').show();
                $('#node-scope').show();
                $('#node-resource').show();
            } 
            RED.tray.resize();
            });
        }
    });
</script>

